<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="adminMapper">
		<!-- reusltMap -->
		<resultMap type="Coupon" id="CouponResultSet">
			<id property = "cpNo" column="CP_NO"/>
			<result property="cpName" column="CP_NAME"/>
			<result property="cpDiscount" column="CP_DISCOUNT"/>
			<result property="cpDate" column="CP_DATE"/>
		</resultMap>
		
		<resultMap type="UpCategory" id="UpCategorySelectResultSet">
			<id property = "up_no" column="UP_NO"/>
			<result property="up_name" column="UP_NAME"/>
			<result property="up_using" column="UP_USING"/>
			<result property="up_date" column="UP_DATE"/>
		</resultMap>
		
		<resultMap type="DownCategory" id="DownCategorySelectResultSet">
			<id property = "down_no" column="DOWN_NO"/>
			<result property="up_no" column="UP_NO"/>
			<result property="down_name" column="DOWN_NAME"/>
			<result property="down_using" column="DOWN_USING"/>
			<result property="down_date" column="DOWN_DATE"/>
		</resultMap>
		
	<!-- 	<resultMap type="Product" id="ProductInsertResultSet">
			<id property="prdtNo" column="PRDT_NO"/>
			<result property="upNo" column="UP_NO"/>
			<result property="prdtName" column="PRDT_NAME"/>
			<result property="prdtComment" column="PRDT_COMMENT"/>
			<result property="prdtPrice" column="PRDT_PRICE"/>
			<result property=prdtBrand column=PRDT_BRAND/>
			<result property="prdtMake" column="PRDT_MAKE"/>
			<result property="prdtImage" column="PRDT_IMAGE"/>
			<result property="prdtDate" column="PRDT_DATE"/>
			<result property="prdtModifyDate" column="MODIFY_DATE"/>
			<result property="prdtUser" column="PRDT_USER"/>
			<result property="downNo" column="DOWN_NO"/>
			<result property="prdtCode" column="PRDT_CODE"/>
			<result property="prdtImagePath" column="PRDT_IMAGE_PATH"/>
			<result property="prdtDetailImage" column="PRDT_DETAIL_IMAGE"/>
			<result property="prdtDetailImagePath" column="PRDT_DETAIL_IMAGE_PATH"/>
		</resultMap> -->
		
		<!-- <resultMap type="ProductOption" id="ProductOptionInsertResultSet">
			<id property="opt_no" column="OPT_NO"/>
			<result property="prdt_no" column="PRDT_NO"/>
			<result property="prdt_no" column="OPT_COLOR"/>
			<result property="prdt_no" column="OPT_SIZE"/>
			<result property="prdt_no" column="OPT_STOCK"/>
			<result property="prdt_no" column="OPT_DATE"/>
			<result property="prdt_no" column="MODIFY_DATE"/>
			<result property="prdt_no" column="OPT_USER"/>
			<result property="prdt_no" column="PRDT_CODE"/>
		</resultMap> -->
		

<insert id="couponInput" parameterType="java.util.Map">
	INSERT INTO COUPON (CP_NO,CP_NAME,CP_DISCOUNT,CP_DATE)
	SELECT COU_SEQ.NEXTVAL, A.*FROM(
<foreach collection="clist" item="c"  separator="UNION ALL" >
	SELECT #{c.cpName} as CP_NAME,
				 #{c.cpDiscount} as 	CP_DISCOUNT,
				 SYSDATE as CP_DATE
	FROM DUAL
	</foreach>) A
</insert>		

<select id="selectListCoupon" resultMap="CouponResultSet">
	SELECT * FROM COUPON
</select>	

<delete id="couponDelete" parameterType="String" >
	DELETE FROM COUPON
	WHERE CP_NAME = #{cpName}
</delete>
		


<select id="UpCategorySelect" resultMap="UpCategorySelectResultSet">
	SELECT * 
	FROM UP_CATE
	WHERE UP_USING='Y'
</select>

<select id="DownCategorySelect" resultMap="DownCategorySelectResultSet">
	SELECT * 
	FROM DOWN_CATE D
	LEFT JOIN UP_CATE U ON D.UP_NO=U.UP_NO
	WHERE DOWN_USING='Y' 
</select>

<insert id="UpCategoryInsert" parameterType="String">
	INSERT INTO UP_CATE (UP_NO, UP_NAME, UP_USING) VALUES
	(UP_CATE_SEQ.NEXTVAL, #{addOption}, DEFAULT)
</insert>

<insert id="DownCategoryInsert" parameterType="DownCategory">
	INSERT INTO DOWN_CATE  
    VALUES (DOWN_CATE_SEQ.NEXTVAL, #{up_no} ,#{down_name}, 'Y',SYSDATE)
</insert>

<update id="UpCategoryDelete" parameterType="_int">
	UPDATE UP_CATE
	SET UP_USING='N'
	WHERE UP_NO=#{up_no}
</update>


<update id="DownCategoryDelete" parameterType="DownCategory">
	UPDATE DOWN_CATE
	SET DOWN_USING='N'
	WHERE UP_NO=#{up_no}
	AND DOWN_NO=#{down_no}
	
</update>
		
<!-- <insert id="ProductInsert" parameterType="Product">
	<selectkey id="prdtNo" resultType="_int" order="BEFORE">
		SELECT PRODUCT_SEQ.NEXTVAL FROM DUAL
	</selectkey>
	INSERT INTO PRDT
	VALUES (#{prdtNo}, #{upNo}, #{prdtName}, #{prdtComment}
			,#{prdtPrice}, #{prdtBrand}, #{prdtMake}, #{prdtImage}
			,SYSDATE, NULL, DEFAULT, #{downNO}, NULL
			,#{prdtImagePath}, #{prdtDetailImage}, #{prdtDetailImagePath})	 
</insert> -->

<!-- <insert id="ProductOptionInsert" parameterType="ProductOption">
	INSERT INTO PRDT_OPT VALUES
	(PRODUCT_OPT_SEQ.NEXTVAL,#{prdt_no}, {opt_color}, {opt_size},
	{opt_stock}, SYSDATE, NULL, #{prdt_code})
</insert> -->



</mapper>

