<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="adminMapper">
		<!-- reusltMap -->
		<resultMap type="Coupon" id="CouponResultSet">
			<id property = "cpNo" column="CP_NO"/>
			<result property="cpName" column="CP_NAME"/>
			<result property="cpDiscount" column="CP_DISCOUNT"/>
			<result property="cpDate" column="CP_DATE"/>
		</resultMap>

<insert id="couponInput" parameterType="java.util.Map">
	INSERT INTO COUPON (CP_NO,CP_NAME,CP_DISCOUNT,CP_DATE)
	SELECT COU_SEQ.NEXTVAL, A.*FROM(
<foreach collection="clist" item="c"  separator="UNION ALL" >
	SELECT #{c.cpName} as CP_NAME,
				 #{c.cpDiscount} as 	CP_DISCOUNT,
				 SYSDATE as CP_DATE
	FROM DUAL
	</foreach>) A
</insert>		

<select id="selectListCoupon" resultMap="CouponResultSet">
	SELECT * FROM COUPON
</select>	

<delete id="couponDelete" parameterType="String" >
	DELETE FROM COUPON
	WHERE CP_NAME = #{cpName}
</delete>
		
		
</mapper>

